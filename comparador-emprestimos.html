<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InvestSmart - Melhorando a vida dos nossos clientes</title>
    <link rel="stylesheet" href="css/style-emprestimos.css" />
    <link rel="shortcut icon" href="images/Camada 1.png" type="image/x-icon" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <style>
    .comparador-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 30px;
      background-color: #f9f9f9;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }

    main h1 {
      color: #2c3e50;
      text-align: center;
      margin-bottom: 40px;
      font-size: 2.2em;
    }

    .form-group {
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      color: #2c3e50;
    }

    input,
    select {
      width: 100%;
      padding: 14px;
      border: 2px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: #118a5f;
      box-shadow: 0 0 8px rgba(5, 224, 78, 0.5);
    }

    main button {
      background-color: #118a5f;
      color: white;
      padding: 14px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 600;
      transition: all 0.3s ease;
      width: 100%;
    }

    main button:hover {
      background-color: #005e3d;
      transform: translateY(-2px);
    }

    #resultados {
      margin-top: 40px;
      padding: 30px;
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    #resultados h2 {
      color: #118a5f;
      margin-bottom: 25px;
      font-size: 1.8em;
      border-bottom: 2px solid #118a5f;
      padding-bottom: 10px;
    }

    #resultados p {
      margin-bottom: 15px;
      color: #34495e;
      font-size: 1.1em;
      display: flex;
      justify-content: space-between;
    }

    #resultados p strong {
      font-weight: 600;
      color: #2c3e50;
    }

    @media (max-width: 600px) {
      .comparador-container {
        padding: 20px;
      }

      input,
      select,
      button {
        font-size: 16px;
      }

      main h1 {
        font-size: 1.8em;
      }

      #resultados h2 {
        font-size: 1.5em;
      }

      #resultados p {
        font-size: 1em;
      }
    }

    /* Estilo para o tooltip */
    [title] {
      position: relative;
      cursor: help;
    }

    [title]:hover::before {
      content: attr(title);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px;
      background: #333;
      color: white;
      border-radius: 6px;
      font-size: 14px;
      white-space: normal;
      width: max-content;
      max-width: 300px;
      text-align: center;
      z-index: 1000;
    }

    [title]:hover::after {
      content: "";
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 8px solid transparent;
      border-top-color: #333;
      margin-bottom: -8px;
    }

    /* Ajuste para o container da taxa de informação */
    .taxa-info {
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .taxa-info i {
      color: #118a5f;
      cursor: help;
      font-size: 18px;
    }

    .taxa-info i:hover {
      color: #005e3d;
    }

    /* Estilo do botão de informação */
    .info-button {
      background: #005e3d;
      border: none;
      color: white;
      cursor: pointer;
      padding: 8px;
      font-size: 16px;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .info-button:hover {
      background: #118a5f;
      transform: scale(1.1);
      box-shadow: 0 0 10px rgba(0, 94, 61, 0.3);
    }

    .info-button i {
      color: white;
    }

    /* Container da taxa de informação */
    .taxa-info {
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Adicione uma classe para criar um overlay escuro quando o tooltip estiver visível */
    .tooltip-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 9998; /* Menor que o tooltip */
      pointer-events: none;
    }
    #tooltip {
      background-color: #129132;
      /* Fundo branco */
      color: #ffffff;
      padding: 15px 20px;
      border-radius: 8px;
      font-size: 14px;
      max-width: 300px;
      text-align: left;
      z-index: 9999; /* Aumentado para garantir que fique por cima de tudo */
      position: absolute;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      line-height: 1.6;
      border: 1px solid #e0e0e0;

      /* Garantir que o texto seja sempre legível */
      font-weight: 400;
      letter-spacing: 0.2px;

      /* Adicionar backdrop filter para desfocar o fundo */
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);

      /* Animação suave */
      animation: tooltipFadeIn 0.3s ease-out;
    }

    /* Seta do tooltip */
    #tooltip::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 10px;
      border-style: solid;
      border-color: #ffffff transparent transparent transparent;
      filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.1));
    }

    /* Animação de entrada do tooltip */
    @keyframes tooltipFadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Container da taxa de informação */
    .taxa-info {
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Adicione uma classe para criar um overlay escuro quando o tooltip estiver visível */
    .tooltip-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.4);
      z-index: 9998; /* Menor que o tooltip */
      pointer-events: none;
    }
  </style>
  <body>
    <header>
      <div class="container-LOGO">
        <img src="images/Camada 1.png" alt="" />
        <div class="logo">InvestSmart</div>
      </div>
      <nav>
        <ul>
          <li id="comment-header"><a href="index.html">Home</a></li>
          <li id="comment-header"><a href="sobre.html">Sobre Nós</a></li>
          <li id="comment-header"><a href="blogs-main.html">Blogs</a></li>
          <li>
            <button
              class="button-header"
              onclick="window.location.href='servicos.html'"
            >
              Serviços

              <i class="fa-solid fa-arrow-right" id="seta"></i>
            </button>
          </li>
        </ul>
      </nav>
    </header>

    <button id="toggleForm" class="floating-button">
      <i class="fa-solid fa-envelope fa-2x"></i>
    </button>
    <div id="registerForm" class="form-container" style="display: none">
      <form class="form">
        <div class="header-container">
          <p class="title">Entre em Contato</p>
          <button id="close-btn">X</button>
        </div>
        <p class="message">
          Ficou com alguma dúvida ou está enfrentando alguma dificuldade em um
          de nossos serviços?
        </p>
        <div class="flex">
          <label>
            <input
              required=""
              placeholder=""
              type="text"
              class="input"
              maxlength="10"
            />
            <span>Nome</span>
          </label>
          <label>
            <input
              required=""
              placeholder=""
              type="text"
              class="input"
              maxlength="30"
            />
            <span>Sobrenome</span>
          </label>
        </div>
        <label>
          <input required="" placeholder="" type="text" class="input" />
          <span>Email</span>
        </label>
        <textarea
          id="myTextarea"
          maxlength="1000"
          rows="5"
          placeholder="Escreva sua mensagem aqui..."
        ></textarea>
        <div id="charCount" class="char-count">1000 caracteres restantes</div>
        <button class="submit">Enviar</button>
      </form>
    </div>
<br><br><br><br>
    <main>
      <div class="comparador-container">
        <h1>Comparador de Empréstimos e Financiamentos</h1>
        <form id="emprestimo-form">
          <div class="form-group">
            <label for="valor">Valor do empréstimo (R$):</label>
            <input type="number" id="valor" required min="1" />
          </div>
          <div class="form-group">
            <label for="prazo">Prazo (meses):</label>
            <input type="number" id="prazo" required min="1" />
          </div>
          <div class="form-group">
            <label for="tipo">Tipo de empréstimo:</label>
            <select id="tipo">
              <option value="pessoal">Empréstimo Pessoal</option>
              <option value="consignado">Empréstimo Consignado</option>
              <option value="veiculo">Financiamento de Veículo</option>
            </select>
          </div>
          <button type="submit">Comparar Opções</button>
        </form>
        <div id="resultados"></div>
      </div>
    </main>

    <br /><br /><br /><br /><br /><br /><br />
    <footer>
      <div class="container-footer">
        <div class="row-footer">
          <!-- footer col-->
          <div class="footer-col">
            <h4>Site</h4>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="blogs-main.html">Blogs</a></li>
              <li><a href="sobre.html">Quem somos</a></li>
              <li><a href="servicos.html">Serviços</a></li>
            </ul>
          </div>
          <!--end footer col-->
          <!-- footer col-->
          <div class="footer-col">
            <h4>Redes Sociais</h4>
            <ul>
              <li><a href="#">Facebook</a></li>
              <li><a href="#">Instragram</a></li>
              <li><a href="#">Tiktok</a></li>
              <li><a href="#">Youtube</a></li>
            </ul>
          </div>
          <!--end footer col-->
          <!-- footer col-->
          <div class="footer-col">
            <h4>Serviços</h4>
            <ul>
                <ul>
            <li><a href="calculadora.html">Calculos de Despesas</a></li>
            <li><a href="recomendacaoinvestimento.html">Investimentos</a></li>
            <li><a href="comparador-emprestimos.html">Comparador de Empréstimos</a></li>
            <li><a href="cambio.html">Cotações de Moedas</a></li>
          </ul>
          </div>
          <!--end footer col-->
          <!-- footer col-->
          <div class="footer-col">
            <h4>Inscreva-se na Newsletter</h4>
            <div class="form-sub">
              <form id="newsletter-form">
                <input
                  type="email"
                  id="email"
                  placeholder="Digite o seu e-mail"
                  required
                />
                <button type="submit">Se inscrever</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <div id="tooltip" style="display: none; position: absolute"></div>
  </body>
  <script
    src="https://kit.fontawesome.com/65f22fe718.js"
    crossorigin="anonymous"
  ></script>
  <script src="script.js"></script>
  <script
    src="https://kit.fontawesome.com/e1063b7707.js"
    crossorigin="anonymous"
  ></script>
  <script>
    document
      .getElementById("emprestimo-form")
      .addEventListener("submit", function (e) {
        e.preventDefault();

        // Obter valores do formulário
        const valor = parseFloat(document.getElementById("valor").value);
        const prazo = parseInt(document.getElementById("prazo").value);
        const tipo = document.getElementById("tipo").value;

        // Taxas de juros reais para cada tipo de empréstimo em São Paulo
        const taxas = {
          pessoal: 0.0796, // Empréstimo pessoal: 5% ao mês
          consignado: 0.0168, // Empréstimo consignado: 1.68% ao mês
          veiculo: 0.025, // Empréstimo para veículo: 2.5% ao mês
        };

        // Cálculos
        const taxa = taxas[tipo];
        const parcela = calcularParcela(valor, taxa, prazo);
        const totalPago = parcela * prazo;
        const jurosTotal = totalPago - valor;

        // Exibir resultados
        exibirResultados(valor, prazo, tipo, parcela, totalPago, jurosTotal);
      });

    function calcularParcela(valor, taxa, prazo) {
      return (
        (valor * taxa * Math.pow(1 + taxa, prazo)) /
        (Math.pow(1 + taxa, prazo) - 1)
      );
    }

    function formatarMoeda(valor) {
      return valor.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL",
      });
    }

    function exibirResultados(
      valor,
      prazo,
      tipo,
      parcela,
      totalPago,
      jurosTotal
    ) {
      // Mapeamento dos tipos de empréstimo para nomes mais amigáveis
      const tiposEmprestimo = {
        pessoal: "Empréstimo Pessoal",
        consignado: "Empréstimo Consignado",
        veiculo: "Financiamento de Veículo",
      };

      const taxasInfo = {
        pessoal: {
          taxa: "7,96%",
          descricao:
            "Taxa média calculada com base nos principais bancos: Banco do Brasil (7,52%), Itaú (8,12%), Bradesco (8,25%), Caixa (7,45%), Santander (8,46%)",
        },
        consignado: {
          taxa: "1,68%",
          descricao:
            "Taxa média calculada com base nos principais bancos: Banco do Brasil (1,55%), Itaú (1,72%), Bradesco (1,75%), Caixa (1,58%), Santander (1,80%)",
        },
        veiculo: {
          taxa: "2,50%",
          descricao:
            "Taxa média calculada com base nos principais bancos: Banco do Brasil (2,35%), Itaú (2,55%), Bradesco (2,65%), Caixa (2,30%), Santander (2,65%)",
        },
      };

      const resultadoHTML = `
            <h2>Resultado da Simulação</h2>
            <p>Valor do empréstimo: ${formatarMoeda(valor)}</p>
            <p>Prazo: ${prazo} meses</p>
            <p>Tipo de empréstimo: ${tiposEmprestimo[tipo]}</p>
            <p>Parcela mensal: ${formatarMoeda(parcela)}</p>
            <p>Total a pagar: ${formatarMoeda(totalPago)}</p>
            <p>Total de juros: ${formatarMoeda(jurosTotal)}</p>
            <p>Taxa de juros mensal: ${taxasInfo[tipo].taxa}</p>
            <p class="taxa-info" style="justify-content: center; margin-top: -10px;">
                <button class="info-button" onclick="mostrarInfo(event, '${
                  taxasInfo[tipo].descricao
                }')">
                    <i class="fas fa-info-circle"></i>
                </button>
            </p>
        `;

      document.getElementById("resultados").innerHTML = resultadoHTML;
    }

    // Substitua a função mostrarInfo por esta nova versão
    function mostrarInfo(event, mensagem) {
      const tooltip = document.getElementById("tooltip");

      // Remover overlay existente se houver
      const existingOverlay = document.querySelector(".tooltip-overlay");
      if (existingOverlay) {
        existingOverlay.remove();
      }

      // Criar e adicionar overlay
      const overlay = document.createElement("div");
      overlay.className = "tooltip-overlay";
      document.body.appendChild(overlay);

      tooltip.textContent = mensagem;
      tooltip.style.display = "block";

      // Posicionar o tooltip
      const button = event.currentTarget;
      const rect = button.getBoundingClientRect();
      const scrollTop =
        window.pageYOffset || document.documentElement.scrollTop;

      // Calcular posição
      const tooltipHeight = tooltip.offsetHeight;
      const spaceAbove = rect.top;
      const spaceBelow = window.innerHeight - rect.bottom;

      if (spaceAbove > tooltipHeight + 20) {
        tooltip.style.top = `${rect.top + scrollTop - tooltipHeight - 20}px`;
      } else {
        tooltip.style.top = `${rect.bottom + scrollTop + 10}px`;
      }

      const tooltipWidth = tooltip.offsetWidth;
      let leftPosition = rect.left - tooltipWidth / 2 + rect.width / 2;

      if (leftPosition < 10) leftPosition = 10;
      if (leftPosition + tooltipWidth > window.innerWidth - 10) {
        leftPosition = window.innerWidth - tooltipWidth - 10;
      }

      tooltip.style.left = `${leftPosition}px`;

      // Fechar o tooltip e remover overlay ao clicar fora
      document.addEventListener("click", function closeTooltip(e) {
        if (e.target !== button) {
          tooltip.style.display = "none";
          overlay.remove();
          document.removeEventListener("click", closeTooltip);
        }
      });
    }
  </script>

  <script>
    document
      .getElementById("newsletter-form")
      .addEventListener("submit", function (e) {
        e.preventDefault(); // Impede o envio padrão do formulário

        var email = document.getElementById("email").value;

        if (email) {
          var xhr = new XMLHttpRequest();
          xhr.open("POST", "newsletter.php", true);
          xhr.setRequestHeader(
            "Content-Type",
            "application/x-www-form-urlencoded"
          );

          // Envia o email para o backend
          xhr.send("email=" + encodeURIComponent(email));

          // Quando a resposta for recebida
          xhr.onload = function () {
            if (xhr.status == 200) {
              try {
                var response = JSON.parse(xhr.responseText);
                alert(response.message); // Exibe a mensagem de sucesso ou erro
              } catch (e) {
                console.error(
                  "Resposta inesperada do servidor:",
                  xhr.responseText
                );
                alert(
                  "Erro inesperado. Verifique o console para mais detalhes."
                );
              }
            } else {
              alert("Ocorreu um erro ao se inscrever. Tente novamente.");
            }
          };
        } else {
          alert("Por favor, insira um email válido!");
        }
      });
  </script>
</html>
